# {{ package_name }}/launch/spawn_{{ robot_name }}.launch.py
from launch import LaunchDescription
from launch.actions import DeclareLaunchArgument
from launch.substitutions import LaunchConfiguration
from launch_ros.actions import Node

def generate_launch_description():
    # ------------------------------------------------------------------ #
    #  Launch arguments
    # ------------------------------------------------------------------ #
    declare_robot_name = DeclareLaunchArgument(
        'robot_name', default_value='{{ robot_name }}'
    )
    declare_x = DeclareLaunchArgument('x', default_value='0.0')
    declare_y = DeclareLaunchArgument('y', default_value='0.0')
    declare_z = DeclareLaunchArgument('z', default_value='0.1')

    robot_name = LaunchConfiguration('robot_name')
    x = LaunchConfiguration('x')
    y = LaunchConfiguration('y')
    z = LaunchConfiguration('z')

    # ------------------------------------------------------------------ #
    #  Spawn robot in Gazebo (robot_description should already be published)
    # ------------------------------------------------------------------ #
    spawn_entity_node = Node(
        package='ros_gz_sim',
        executable='create',
        arguments=[
            '-name', robot_name,
            '-topic', 'robot_description',
            '-x', x,
            '-y', y,
            '-z', z
        ],
        output='screen'
    )

    # ------------------------------------------------------------------ #
    #  LaunchDescription
    # ------------------------------------------------------------------ #
    return LaunchDescription([
        declare_robot_name,
        declare_x,
        declare_y,
        declare_z,
        spawn_entity_node
    ])
