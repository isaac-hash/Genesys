from launch import LaunchDescription
from launch_ros.actions import Node
from launch.substitutions import LaunchConfiguration
from ament_index_python.packages import get_package_share_directory
import os

def generate_launch_description():
    pkg_share = get_package_share_directory('{{ package_name }}')
    robot_name = LaunchConfiguration('robot_name', default='{{ robot_name }}')
    namespace = LaunchConfiguration('namespace', default='')
    x = LaunchConfiguration('x', default='0.0')
    y = LaunchConfiguration('y', default='0.0')
    z = LaunchConfiguration('z', default='0.1')

    urdf_file = os.path.join(pkg_share, 'urdf', f'{robot_name}.urdf.xacro')

    return LaunchDescription([
        Node(
            package='gazebo_ros',
            executable='spawn_entity.py',
            arguments=[
                '-entity', robot_name,
                '-file', urdf_file,
                '-robot_namespace', namespace,
                '-x', x, '-y', y, '-z', z
            ],
            output='screen'
        )
    ])