from genesys.decorators import node, publisher, subscriber, timer, service, action_server
from genesys.helpers import spin_node
from std_msgs.msg import String

@node("{{ node_name }}")
class {{ class_name }}:
    """
    A simple component node.
    This node is auto-generated by the Genesys framework.
    """

    def __init__(self):
        self.counter = 0

    @timer(period=1.0)
    def timer_callback(self):
        """
        This method is executed every 1.0 seconds.
        """
        self.counter += 1
        self.publisher.publish(String(data=f"Hello, world! {self.counter}"))

    @publisher(topic="~/chatter", msg_type=String)
    def publisher(self):
        """
        This method is decorated as a publisher on the '~/chatter' topic.
        """
        pass

    @subscriber(topic="/chatter", msg_type=String)
    def subscriber_callback(self, msg):
        """
        This method is executed whenever a message is received on the '/chatter' topic.
        """
        self.get_logger().info(f"I heard: '{msg.data}'")
