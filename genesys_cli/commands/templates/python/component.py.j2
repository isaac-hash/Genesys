
from genesys.decorators import component, timer, publisher
from rclpy.node import Node
from std_msgs.msg import String
from rclpy.action import ActionServer
from rclpy_components.node_factory import NodeFactory
from genesys.node_base import NodeBase

@component("{{ node_name }}")
class {{ class_name }}(NodeBase):
    """
    A simple publisher component that publishes a message every second.
    This component is auto-generated by the Genesys framework.
    """
    def __init__(self, *args, **kwargs):
        super().__init__("{{ node_name }}", self)
        # The logger is automatically available after super().__init__
        self.counter = 0

    @timer(period_sec=1.0)
    @publisher(topic="chatter", msg_type=String)
    def publish_message(self):
        """
        This method is executed every second by the timer.
        The String object it returns is automatically published to the 'chatter' topic.
        """
        msg = String()
        msg.data = f"Hello from Genesys Component! Message #{self.counter + 1}"
        
        self.get_logger().info(f"Publishing: {msg.data}")

        self.counter += 1
        
        return msg

def get_node_factory():
    return NodeFactory({{ class_name }})
